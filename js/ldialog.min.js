/*! ldialog 2016-05-16 */

function LDialog(appHtml,config,type){this.appHtml=appHtml||"",this.config=config||{},this.type=type||{},this.createId}var allType;LDialog.prototype.init=function(){var popType={info:{title:"信息",btn:{sure:"btn-info",cancel:"btn-default"},iconData:""},success:{title:"成功",btn:{sure:"btn-success",cancel:"btn-default"},iconData:""},error:{title:"错误",btn:{sure:"btn-error",cancel:"btn-default"},iconData:""},confirm:{title:"提示",btn:{sure:"btn-warning",cancel:"btn-default"},iconData:""},input:{title:"输入",btn:{sure:"btn-primary",cancel:"btn-default"}},custom:{title:"弹窗",btn:{}}},initType=this.type instanceof Object?this.type:popType[this.type]||{},initConfig=$.extend(!0,{btn:{},sureTitle:"确定",cancelTitle:"取消",title:"",footer:!0,header:!0,icon:!0,iconSize:"",iconColor:"",iconData:"",subtitle:"",minHeight:"50px",width:"550px",opacity:.5,timeOut:-1,radius:"5px",enterAni:"fadeInDown",verCenter:!1,globalClose:!1,outline:!1,onSure:$.noop,onCancel:$.noop,onClose:$.noop},initType,this.config);this.createHtml(initConfig),allType=initConfig},LDialog.prototype.createHtml=function(config){var $txt=config.icon?$("<span>").addClass("l-tip-info-fonts").html(this.appHtml):$("<span>").addClass("l-tip-info-fonts").html(this.appHtml).css("margin-left",0),$icon=""!==config.iconData&&config.icon?$("<i>").addClass("l-tip-info-img").attr("data-icon",config.iconData).css({color:config.iconColor,"font-size":config.iconSize}):"",$close=$('<span class="l-dialog-c">').html("×"),$title=$('<h4 class="l-dialog-t">').html(config.title),$subtitle=""!==config.subtitle?$('<div class="l-dialog-subtitle">').html(config.subtitle):"",$sure=config.btn.sure?$("<div>").addClass("btn").addClass(config.btn.sure).text(config.sureTitle):$("<div>"),$cancel=config.btn.cancel?$("<div>").addClass("btn").addClass(config.btn.cancel).text(config.cancelTitle):$("<div>"),$footer=config.footer?$('<div class="l-dialog-footer">'):$('<div class="l-dialog-footer" style="display: none!important"></div>'),$contentBox=$('<div class="l-dialog-content tc"></div>'),$contentBoxIn=$('<span class="l-tip-info"></span>'),$headerBox=config.header?$('<div class="l-dialog-title"></div>'):$("<div>").css("display","none"),$dialogBox=config.outline?$("<div>").addClass("l-dialog-box animated "+config.enterAni+" outline").css({width:config.width,"min-height":config.minHeight,"border-radius":config.radius}):$("<div>").addClass("l-dialog-box animated "+config.enterAni).css({width:config.width,"min-height":config.minHeight,"border-radius":config.radius}),$dialog=.5===config.opacity?$("<div>").addClass("l-dialog animated fadeIn"):$("<div>").addClass("l-dialog animated fadeIn").css({"background-color":"rgba(0,0,0,"+config.opacity+")"}),sendObj={txt:$txt,icon:$icon,close:$close,title:$title,subtitle:$subtitle,sure:$sure,cancel:$cancel,footer:$footer,contentBox:$contentBox,contentBoxIn:$contentBoxIn,headerBox:$headerBox,dialogBox:$dialogBox,dialog:$dialog};this.createBom(sendObj,config),this.addListener(sendObj,config)},LDialog.prototype.createBom=function(accObj,config){this.createId=this.createId(),accObj.dialog.attr("id",this.createId).append(accObj.dialogBox.append(accObj.headerBox.append(accObj.title).append(accObj.close).append(accObj.subtitle)).append(accObj.contentBox.append(accObj.contentBoxIn.append(accObj.icon).append(accObj.txt))).append(accObj.footer.append(accObj.cancel).append(accObj.sure))),$("body").append(accObj.dialog),LDialog.isVerCenter(config,this.createId),$("body").blur()},LDialog.isVerCenter=function(config,createId){if(config.verCenter){var winHeight=$(window).height(),diaHeight=$("#"+createId).find(".l-dialog-box").height(),verCenter=Math.ceil((winHeight-diaHeight)/2)-20;$("#"+createId).find(".l-dialog-box").css("margin-top",verCenter)}},LDialog.prototype.createId=function(){var id="pop-"+(new Date).getTime()+parseInt(1e5*Math.random());return $("#"+id).length>0?this.creatPopId():id},LDialog.prototype.addListener=function(accObj,config){var dia_id={id:this.createId};accObj.close.on("click",dia_id,this.close),accObj.cancel.on("click",dia_id,this.cancel),accObj.sure.on("click",dia_id,this.sure),$(window).on("keydown",dia_id,this.enter),-1!==config.timeOut&&config.timeOut>0&&this.timeOutClose(config,dia_id.id),config.globalClose&&this.globalClose(config,dia_id.id)},LDialog.prototype.globalClose=function(config,dia_id){$("#"+dia_id).click(function(){$(this).removeClass("fadeIn").addClass("fadeOut"),$(this).find(".l-dialog-box").removeClass(allType.enterAni).addClass("fadeOut"),setTimeout(function(){$("#"+dia_id).remove()},300)}),$("#"+dia_id).find(".l-dialog-box").on("click",function(event){event.stopPropagation()})},LDialog.prototype.timeOutClose=function(config,dia_id){setTimeout(function(){LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove()},300)},config.timeOut)},LDialog.prototype.close=function(event){var dia_id=event.data.id;LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onClose()},300)},LDialog.prototype.cancel=function(event){var dia_id=event.data.id;LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onCancel()},300)},LDialog.prototype.sure=function(event){var input="test value",dia_id=event.data.id;LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onSure(input)},300)},LDialog.prototype.enter=function(event){var dia_id=event.data.id;13===event.keyCode&&1===$("#"+dia_id).length&&LDialog.keySure(dia_id)},LDialog.keySure=function(dia_id){var input="test value";LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onSure(input)},300)},LDialog.addOrRemoveClass=function(dia_id){$("#"+dia_id).removeClass("fadeIn").addClass("fadeOut"),$("#"+dia_id).find(".l-dialog-box").removeClass(allType.enterAni).addClass("fadeOut")};
//# sourceMappingURL=ldialog.min.js.map