/*! ldialog 2016-05-24 */

function LDialog(appHtml,config,type){this.appHtml=appHtml||"",this.config=config||{},this.type=type||{},this.createId}var allType;LDialog.prototype.init=function(){var popType={info:{title:"信息",btn:{sure:"btn-info",cancel:"btn-default"},iconData:""},success:{title:"成功",btn:{sure:"btn-success",cancel:"btn-default"},iconData:"",iconColor:"#56BD9D"},error:{title:"错误",btn:{sure:"btn-error",cancel:"btn-default"},iconData:"",iconColor:"#c9302c"},confirm:{title:"提示",btn:{sure:"btn-warning",cancel:"btn-default"},iconData:""},input:{title:"输入",btn:{sure:"btn-primary",cancel:"btn-default"}},custom:{title:"弹窗",btn:{}}},initType=this.type instanceof Object?this.type:popType[this.type]||{},initConfig=$.extend(!0,{btn:{},cancelTitle:"取消",enterAni:"fadeIn",footer:!0,globalClose:!1,header:!0,icon:!0,iconColor:"",iconData:"",iconSize:"",minHeight:"50px",move:!0,moveType:1,moveOut:!1,onSure:$.noop,onSureBefore:$.noop,onCancel:$.noop,onClose:$.noop,opacity:.3,outline:!1,radius:"5px",subtitle:"",sureTitle:"确定",timeOut:-1,title:"",verCenter:!1,width:"550px"},initType,this.config);this.createHtml(initConfig),allType=initConfig},LDialog.prototype.createHtml=function(config){var $txt=""===config.iconData?$("<div>").addClass("l-tip-info-fonts").html(this.appHtml).css({display:"block"}):$("<div>").addClass("l-tip-info-fonts").html(this.appHtml),$icon=""!==config.iconData&&config.icon?$("<i>").addClass("l-tip-info-img").attr("data-icon",config.iconData).css({color:config.iconColor,"font-size":config.iconSize}):"",$close=$('<span class="l-dialog-c">').html("×"),$title=$('<div class="l-dialog-title">').html(config.title),$subtitle=""!==config.subtitle?$('<div class="l-dialog-subtitle">').html(config.subtitle):"",$sure=config.btn.sure?$("<div>").addClass("btn").addClass(config.btn.sure).text(config.sureTitle):$("<div>"),$cancel=config.btn.cancel?$("<div>").addClass("btn").addClass(config.btn.cancel).text(config.cancelTitle):$("<div>"),$footer=config.footer?$('<div class="l-dialog-footer">'):$('<div class="l-dialog-footer" style="display: none!important"></div>'),$contentBox=$('<div class="l-dialog-content tc"></div>'),$contentBoxIn=$('<div class="l-tip-info"></div>'),$headerBox=config.header?$('<div class="l-dialog-title-box" data-move="'+config.move+'"></div>'):$("<div>").css("display","none"),$dialogBox=config.outline?$("<div>").addClass("l-dialog-box animated "+config.enterAni+" outline").css({width:config.width,"min-height":config.minHeight,"border-radius":config.radius}):$("<div>").addClass("l-dialog-box animated "+config.enterAni).css({width:config.width,"min-height":config.minHeight,"border-radius":config.radius}),$dialog=.3===config.opacity?$("<div>").addClass("l-dialog animated fadeIn"):$("<div>").addClass("l-dialog animated fadeIn").css({"background-color":"rgba(0,0,0,"+config.opacity+")"}),sendObj={txt:$txt,icon:$icon,close:$close,title:$title,subtitle:$subtitle,sure:$sure,cancel:$cancel,footer:$footer,contentBox:$contentBox,contentBoxIn:$contentBoxIn,headerBox:$headerBox,dialogBox:$dialogBox,dialog:$dialog};this.createBom(sendObj,config),this.addListener(sendObj,config)},LDialog.prototype.createBom=function(accObj,config){this.createId=this.createId(),accObj.dialog.attr("id",this.createId).append(accObj.dialogBox.append(accObj.headerBox.append(accObj.title.append(accObj.subtitle)).append(accObj.close)).append(accObj.contentBox.append(accObj.contentBoxIn.append(accObj.icon).append(accObj.txt))).append(accObj.footer.append(accObj.cancel).append(accObj.sure))),$("body").append(accObj.dialog),LDialog.isVerCenter(config,this.createId),LDialog.appInput(config,this.createId),$("body").blur()},LDialog.appInput=function(config,id){var inputArray=config.input,$inputBox=$('<div class="l-form-box">'),$textarea=$("<textarea>"),$input=$("<input />");void 0!==inputArray&&inputArray.forEach(function(v,i){var inputAI=inputArray[i];switch(inputAI.type){case"text":$inputBox=LDialog.createInputDom(inputAI,$inputBox,$input);break;case"textarea":$inputBox=LDialog.createInputDom(inputAI,$inputBox,$textarea);break;default:$inputBox=LDialog.createInputDom(inputAI,$inputBox,$input)}$textarea=$("<textarea>"),$input=$("<input />"),$(".l-tip-info-fonts").append($inputBox)})},LDialog.createInputDom=function(inputAI,$inputBox,$inputType){var $inputLine=$('<div class="form-line">'),$leftSpan=$('<span class="left-form-info">'),inputType=null===inputAI.type?inputAI.type:"text";return $inputType.attr({value:inputAI.value,placeholder:inputAI.placeH,maxlength:inputAI.maxlength}),"textarea"!==inputAI.type?$inputType.attr({type:inputType}):$inputType,null!==$inputType.width?$inputType.css("width",inputAI.width):$inputType,null!==$inputType.height?$inputType.css("height",inputAI.height):$inputType,inputAI.verCenter?($inputType.addClass("l-center-input"),$inputLine.append($inputType)):($leftSpan.html(inputAI.leftInfo),$inputLine.append($leftSpan).append($inputType)),$inputBox.append($inputLine),$inputBox},LDialog.isVerCenter=function(config,createId){var winHeight=$(window).height(),diaHeight=$("#"+createId).find(".l-dialog-box").height(),verTop=Math.ceil((winHeight-diaHeight)/2)-10,winWidth=$(window).width(),diaWidth=$("#"+createId).find(".l-dialog-box").width(),verLeft=Math.ceil((winWidth-diaWidth)/2);config.verCenter?($("#"+createId).find(".l-dialog-box").css({top:verTop,left:verLeft}),LDialog.calCoordinate(createId)):$("#"+createId).find(".l-dialog-box").css({top:"40px",left:verLeft})},LDialog.calCoordinate=function(createId){$(window).resize(function(){var winHeight=$(window).height(),diaHeight=$("#"+createId).find(".l-dialog-box").height(),verTop=Math.ceil((winHeight-diaHeight)/2)-10,winWidth=$(window).width(),diaWidth=$("#"+createId).find(".l-dialog-box").width(),verLeft=Math.ceil((winWidth-diaWidth)/2);$("#"+createId).find(".l-dialog-box").css({top:verTop,left:verLeft})})},LDialog.prototype.createId=function(){var id="pop-"+(new Date).getTime()+parseInt(1e5*Math.random());return $("#"+id).length>0?this.creatPopId():id},LDialog.prototype.addListener=function(accObj,config){var dia_id={id:this.createId};accObj.close.on("click",dia_id,this.close),accObj.cancel.on("click",dia_id,this.cancel),accObj.sure.on("click",dia_id,this.sure),$(window).on("keydown",dia_id,this.enter),-1!==config.timeOut&&config.timeOut>0&&this.timeOutClose(config,dia_id.id),config.globalClose&&this.globalClose(config,dia_id.id),config.move&&LDialog.moveLDialog(config,dia_id.id)},LDialog.moveLDialog=function(config,dia_id){var boxX,boxY,cloneL,cloneT,isMove=!1;$("#"+dia_id).find(".l-dialog-title").mousedown(function(e){isMove=!0,$(this).css("cursor","move"),e.preventDefault(),boxX=e.offsetX,boxY=e.offsetY;var cW=$(this).parent().parent().outerWidth()-5,cH=$(this).parent().parent().outerHeight()-5,offX=e.pageX,offY=e.pageY,setOffX=offX-boxX-1,setOffY=offY-boxY-1;1===config.moveType?$("body").append('<div id="l-dialog-clone-box"  class="l-dialog-clone-box" style="width:'+cW+"px; height:"+cH+"px; left:"+setOffX+"px; top: "+setOffY+'px;visibility: hidden"></div>'):$("body").append('<div id="l-dialog-clone-box"  class="l-dialog-clone-box" style="width:'+cW+"px; height:"+cH+"px; left:"+setOffX+"px; top: "+setOffY+'px;"></div>')}).mouseover(function(){$(this).css("cursor","default")}),$(document).mousemove(function(e){if(isMove){var e=e||window.event,oX=e.clientX-boxX,oY=e.clientY-boxY;config.moveOut||(0>oX&&(oX=0),0>oY&&(oY=0),oX>$(window).width()-$(".l-dialog-clone-box").outerWidth()&&(oX=$(window).width()-$(".l-dialog-clone-box").outerWidth()),oY>$(window).height()-$(".l-dialog-clone-box").outerHeight()&&(oY=$(window).height()-$(".l-dialog-clone-box").outerHeight())),1===config.moveType?$(".l-dialog-box").css({left:oX+"px",top:oY+"px"}):$(".l-dialog-clone-box").css({left:oX+"px",top:oY+"px"}),cloneL=oX,cloneT=oY}}).mouseup(function(){$(this).css("cursor","default"),$(".l-dialog-clone-box").remove(),$("#"+dia_id).find(".l-dialog-box").css({left:cloneL+"px",top:cloneT+"px"}),isMove=!1})},LDialog.prototype.globalClose=function(config,dia_id){$("#"+dia_id).click(function(){$(this).removeClass("fadeIn").addClass("fadeOut"),$(this).find(".l-dialog-box").removeClass(allType.enterAni).addClass("fadeOut"),setTimeout(function(){$("#"+dia_id).remove()},200)}),$("#"+dia_id).find(".l-dialog-box").on("click",function(event){event.stopPropagation()})},LDialog.prototype.timeOutClose=function(config,dia_id){setTimeout(function(){LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove()},200)},config.timeOut)},LDialog.prototype.close=function(event){var dia_id=event.data.id;LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onClose()},200)},LDialog.prototype.cancel=function(event){var dia_id=event.data.id;LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onCancel()},200)},LDialog.prototype.sure=function(event){var input=LDialog.getAllValue(),dia_id=event.data.id;allType.onSureBefore(),LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onSure(input)},200)},LDialog.prototype.enter=function(event){var dia_id=event.data.id;13===event.keyCode&&1===$("#"+dia_id).length&&LDialog.keySure(dia_id)},LDialog.keySure=function(dia_id){var input=LDialog.getAllValue();allType.onSureBefore(),LDialog.addOrRemoveClass(dia_id),setTimeout(function(){$("#"+dia_id).remove(),allType.onSure(input)},200)},LDialog.addOrRemoveClass=function(dia_id){$("#"+dia_id).removeClass("fadeIn").addClass("fadeOut"),$("#"+dia_id).find(".l-dialog-box").removeClass(allType.enterAni).addClass("fadeOut")},LDialog.getAllValue=function(){var allForm=$(".form-line"),getAllValue=[];return[].forEach.call(allForm,function(v,i){1===$(allForm[i]).find("input").size()?getAllValue.push($(allForm[i]).find("input").val()):getAllValue.push($(allForm[i]).find("textarea").val())}),getAllValue};
//# sourceMappingURL=ldialog.min.js.map
/*! ldialog 最后修改于： 2016-05-24 */